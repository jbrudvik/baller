#!/usr/bin/env bash

shopt -s nullglob
shopt -s dotglob

dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

backup="${dir}/backup"
source "${backup}"

pre="${dir}/pre-install"
if [ -f "${pre}" ]; then
  source "${pre}"
fi

for f in "${dir}/files/"*; do
  filename="$(basename "${f}")"
  installed_file="${HOME}/${filename}"

  ln -sf "${f}" "${installed_file}" && echo "Installed ${installed_file}"
done

post="${dir}/post-install"
if [ -f "${post}" ]; then
  source "${post}"
fi
